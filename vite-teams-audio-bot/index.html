<!DOCTYPE html>
<html>
  <head>
    <title>ACS Teams Bot</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
      }
      .section {
        margin-bottom: 20px;
        padding: 15px;
        border: 1px solid #ddd;
        border-radius: 5px;
      }
      button {
        padding: 8px 16px;
        margin-right: 10px;
        cursor: pointer;
      }
      #transcriptionArea {
        width: 100%;
        height: 300px;
        margin-top: 10px;
        font-family: monospace;
        padding: 10px;
        line-height: 1.5;
        background-color: #f9f9f9;
        border: 1px solid #ddd;
        overflow-y: auto;
        white-space: pre-wrap;
      }

      /* Style for different speakers */
      .speaker-name {
        font-weight: bold;
        color: #0078d4;
      }

      /* Make timestamps less prominent */
      .timestamp {
        color: #666;
        font-size: 0.9em;
      }
      .status {
        font-weight: bold;
        margin: 10px 0;
      }
    </style>
  </head>
  <body>
    <div class="section">
      <h2>Join Teams Meeting and Play Audio</h2>
      <button onclick="joinAndPlay()">Join & Play</button>
      <audio
        id="audioElement"
        crossorigin="anonymous"
        src="https://innovation-sprint26.s3.us-east-1.amazonaws.com/audio.wav"
      ></audio>
    </div>
    <audio crossorigin="anonymous" id="ttsAudio"></audio>

    <div class="section">
      <h3>Capture Meeting Audio</h3>
      <p>Capture and transcribe audio from meeting participants</p>
      <button onclick="startCapturingAudio()">Start Capturing</button>
      <button onclick="stopCapturingAudio()">Stop Capturing</button>
      <button onclick="testSpeechRecognition()">Test Speech Recognition</button>
      <button onclick="stopTestSpeechRecognition()">Stop Test</button>
      <button id="toggleCaptionsBtn" onclick="toggleCaptions()">
        Start Captions
      </button>
      <p id="captureStatus" class="status">Capturing: Inactive</p>

      <h4>Transcription</h4>
      <textarea
        id="transcriptionArea"
        readonly
        placeholder="Transcriptions will appear here..."
      ></textarea>

      <h4>Captions</h4>
      <textarea
        id="captionsArea"
        readonly
        placeholder="Captions will appear here..."
        style="
          width: 100%;
          height: 200px;
          margin-top: 10px;
          font-family: monospace;
          padding: 10px;
          line-height: 1.5;
          background-color: #f0f8ff;
          border: 1px solid #add8e6;
          overflow-y: auto;
          white-space: pre-wrap;
        "
      ></textarea>
    </div>

    <script type="module">
      // Import the main.js module which will expose the functions to window
      import "/main.js";

      // Make sure the functions are available after the module is loaded
      document.addEventListener("DOMContentLoaded", () => {
        // Assign click handlers programmatically to ensure they're available
        document.querySelector('button[onclick="joinAndPlay()"]').onclick =
          () => window.joinAndPlay();
        document.querySelector(
          'button[onclick="startCapturingAudio()"]'
        ).onclick = () => window.startCapturingAudio();
        document.querySelector(
          'button[onclick="stopCapturingAudio()"]'
        ).onclick = () => window.stopCapturingAudio();
        document.querySelector(
          'button[onclick="testSpeechRecognition()"]'
        ).onclick = () => window.testSpeechRecognition();
        document.querySelector(
          'button[onclick="stopTestSpeechRecognition()"]'
        ).onclick = () => window.stopTestSpeechRecognition();
        document.querySelector('button[onclick="toggleCaptions()"]').onclick =
          () => window.toggleCaptions();
      });
    </script>
  </body>
</html>
